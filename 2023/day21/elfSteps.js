const input = [
  "...................................................................................................................................",
  ".....###.........#..#.........#.............#........##....#................##.......#..#.#.....#......#..#..#..##........#........",
  ".#.............#............#...#.#...#.............#....#.................#.......#................#.....#....#.................#.",
  "..#.......#..........#..........#......#.........#........................#.#...##.........#.......#.....#.##..#.............#.....",
  "....#...#..##......#................##......#..#..#........................##.......#.............#..............##................",
  "........#....#........#..#......#....#......#........#.........................#.....#.#.........#.................#..#..##....#...",
  ".......................#...#.....#.....#..........#..#.........#............##.#...........#.....#..#.##..........#......#.#.....#.",
  "..........#..........#....#.##.#...................#..#...........#...............#...........................#.....#.......##.....",
  ".#.##..........#....#.#...#.....#.............#...............#.....................#.......#.#......#..................#..#.......",
  "......#.#.#...................#..#.............................#...............#....#..............................###...........#.",
  "....#...#...................#..................#...........####....#...............#....#..#.................#................#....",
  ".............#..#.#..##.....#...#.......##.#...............#.........##..........#......................##....##....#.......#...#..",
  "....#....#......###.#......#..#....#..#.........#....................................................#............#.........#.#....",
  ".......#.#........##........#..#............#.##.............#..#...#....................#.#.....##.................#..............",
  "....#....#....##...#..#......#.#.......................##......#.......................#..#.#..........#.#...........#..........#..",
  ".#.......#..#......#......#..#............................##..........................#.............#.......#...##.#...............",
  "...#..#...................#....#....#.....##...........#...............#...#...........#.#.#..#.#.#.#.#..#..#...#.#....#...........",
  ".....................#..#.#..#..#..........#........#.................#.......#.......#.#......#.#..#........#............##.......",
  ".......................................#...#.................###...##.#.....##.........##.........#..............#........#........",
  "........#.##.........#........#.....##.............#...#...............#...................#..#.................#.........#.....#..",
  "..#..#.#........#.....#.................................#............#.#....#.#...............##...#.....#............#..#.........",
  "....#......#.....#....................#.........#.................#......................................................#.#....#..",
  "....##...#...##..........#..............................#..#...#....#.......................#.#.#.....#.......#..#............##...",
  ".#.....#.........#........#...#.....###...........#...............#.#...........#.#..........##..#..#................#..........#..",
  "...#..#.#.#.......................................................#.##...#..........##............#..#.....#.........###...#....#..",
  "......###.......#.#....##......#..#....................#........#.............#.#..........................#....#......###..#....#.",
  "........#..........#......#....#.............#..#.................#..............................#.......#.#................#......",
  ".#........#...........#.........#.....................#.........#........##.#.###......................####..#.#....#............#.",
  "..##........#............#.#.......................#.....#.##.................#..#....#............................................",
  ".............#..##....#.#.#...............#..................#.......##.#.....#...................##...##...#.##.............###...",
  "......#..#....##.............................#.............................#..#....#....##.........#...#................#...#.##.#.",
  "..#...........#........................#...........#....#...............#...............#...................#......................",
  "....#...#.#.#...........#.#................###...............#.....##........#........................#.....##...#.#..........#....",
  ".#..#.............#...#....##........#...#.............#............................#..#..#...........#...............##...........",
  "...#......#..........................#.#.....##........#...#.......#...#...........##......#..............#..#.#...#.....#.#....#..",
  ".#.#..............#................##.....#........#.....##...#....................#......#..#..............................#......",
  ".#....................#.............#....#.............##.......#...........#.#......#...................##...#..............#.....",
  ".....#.#...#.........##................#......#.....#...#....##.....................................................##.............",
  ".............#........#............#.#.....#.........##.................##.....###.........#...............#....#..........#.....#.",
  "..#.#...#....#...#......................##............#...#.#..#.........##.................................#......#........#....#.",
  "..#.....#..................................#.#.....................#..#....#.....###..#.#...#..#.....#.......#..#..................",
  "....#....##.#.....#.......................#.#...#......#.......................#.....#.........#....#...............#.......#......",
  "....#.###.#......#...................#.............#...............##.........##........#......#....#..........#........##....###..",
  ".....###....#...#.......................##.#....#.#...#.#..........#...#.....#......#.........#........#............#.....#...#....",
  "...#.#.....#..#..............................##....#......#....#............#..#.#............#...#................................",
  "...............#........##.#####.#......#.........................#....................#.#.#...##.#.##.#.#..................##.....",
  "..#............................#.............#.#....#..........##.......#.#......#.#.#........#..#.#.##..................#.........",
  "..##..##.#.............#..#.....#..#....#.#.#......#........#.................##.............#......#....#.#...........#......#..#.",
  "..........##.#.........#.....##...................#.#...#...........................#........#...........................####......",
  ".#......#.#.#.......#...............#.##..........#........#.................#..#.#.......#.............#....#.....................",
  ".#.....#..#........#..#.....#...........#.#.....#.#.#...#..#..#.....#..........#.#......#............###.#.#...............#.....#.",
  "..................##...#.......#...............#...........#.......#...............#........................................#......",
  ".##.................#..#........#......##.............#..#.#..#....................#....................##.#.............###.......",
  ".#......#...........#..........#...................#.........#.......##...........##..#......#.#....#.....#........................",
  ".........................#.#.....#..#....#...#......#......................#............#................#.........................",
  "....#....................#...#..#..............#..#...#..#..#...............#.....................#...........#..##...........#....",
  "....#.........#...........#.....................#.#....#...#.................##.......#.#.........#...#............##..............",
  "......................#........#...#...................#...#.###....#....#....#...............#....#...#....#......................",
  "..................##......................##.....#...........#..........##..##.#......##............#.##...........................",
  ".#.....................#.......#.................#..#........#...........#.#....#......#........#...........#......................",
  "...........#.........#....#..#.#.#....#..#.......##.........#.............................#....#..#......#.#...#........#..........",
  ".........#.........#.#....#.#.......................#..#......................#.................#....................#.#.#.........",
  "......................#...#...#.........##.....#..............##......#...###......#...#....#.....##...........##........##........",
  "............##..#.#......#...#.............#..#..#.........#...........#...#..#.........#...#......................................",
  "...........#...........#..#......##..........#........#....#....#........#..................#...#.......##..#..#..#......#.........",
  ".................................................................S.................................................................",
  "..............#...#......#..#.....#................##......#............#........#........#..............#......#...........#......",
  "...........#..#......#..#....#.....#..................#.....#...............#....#.....#..........#............#.#......#..#.......",
  "..............#........#.#....#...#............#....#......#..........................................#.............#....#.........",
  "..................#...#...............#.#...#..........#......................#.#.#.#.......#.....#..#........###..................",
  "...................#.........##.#.#.....#..........#...........#.........#.#..#..##......#........#................................",
  ".#.................#.....#.....#.##........#..........#...........#....#.....#...#.....#.........#..#........#.......#.#...........",
  "..................#........#......##.#....##...#.#....#..#.....#....#...................#.....#...##...#.#......................#..",
  "...##..............#..................#......................#.........##...#....#..#....#...........#.#..#........#...........#...",
  "..#..#.............#................#............#............#.......#..#...##.....#.......#.......#.....#..................#.#...",
  "..#.............#...................................#.............#......................................#..........#..............",
  ".....#................#......#..#............#......#..#.##.#......#.......#.....#..#.........................##...........#...#.#.",
  "...#.#............#......##........#.............#.....#..............#......###......#................#..................#......#.",
  "....#...#.........#..#.##...###.#..............#........#..............#.#.........##....#.#.#......#....#.................#...#...",
  ".##...#..#..........##............#........###.....#............#..#.........#............#.#.#........#..#..###............#......",
  ".......#.................#.......#...#.......#..#......#..............#......#..##.................##....#.......................#.",
  "...........................#.....#........#..#..............#.....##..........#....#..............#..#......##.............#.......",
  "......#.................#................#...#.......................#.#.......##..#.........#....#.....##.............#.#.....#...",
  "........................#.#.#.....##.......##.#........##.....#.....#...#....................#..........#..........................",
  ".#...#........#............#.....#...#.....................#...........#.............#.##.#.....#......#.#...................#...#.",
  ".....#..........#...........#...........................#.#.........#.............#..#.#..#...#.#....#..##..........#...........#..",
  ".....#....#..#..................#....#...#......................#.......#..................#.......................#....#....#..#..",
  "...#..............#...........#.#...........#.........#....#.........#.##.#..#......##.........#...##............##..#.#..#.....#..",
  "..#............................#...#.....#......#.........#...#.....................#.....#.....#..#..#.............#..#...........",
  "......#....#.....#.....................#.#.......#.#.#.....##.......#...#.............#..#.......#.............#..........#.#......",
  "...............##..#................#.........#...##......#..#......#.#..#..........###..#..#..##............#..........#...#....#.",
  ".#....#...........#..#.........#.#.#....#....#.........#.#............#....#...............##..................#.....#......#......",
  "........#...#.....#.#................#...#....#..#....#.#..#.........#...#.................#..#.........................#..........",
  ".........##...........................................#.................#...#.....#..#...##......#.........##............#...#.....",
  "..#..#..#...#.#..................#....#.................#.#...#.........#.......#......##..#....#.........#......#....#............",
  "...#...#......#....##...................##....#......#......#......#.......#.................#..#.............#.#..................",
  ".#...#...#..##......#.#................#.#.................##..##.#..#...#.........#.........#..........................#..##......",
  ".....................#..#..............#.......#..#...##.....................##...#....#.......................#..........#........",
  ".......#.........#.#.....##..........#..#......#......#..#......#...#..................#....#......................................",
  ".....#...#.....#........##......................##..................#..#...#.........###.#..#............................#.#....#..",
  "........#....#...........#..#..........#.#.........................................#..#....#.......#...#...#...............###.....",
  "....##..............#..#.................#..........#...........#.....#.....#....#....#.##....................#......#..#..........",
  "..#..#..##..........##....#.#....................#.....#.#.....#............#.#........#............#....................#......#..",
  "..........#..##......##........#....................#..#.#.............#......#........#.........#.....#....##..............##..#..",
  ".#.......#...........#.......#.............#......###.....##.#....#....#..#....#...............................#.#..#...#.#....#...",
  "............#....##...........#.............#.......................#......#.#...#...............##...#.....#...................#..",
  "..#........#.........#....#..........................#....................###................#....................#.#..............",
  ".....#..#.#........#............#.#..##.......#.....#..#...........#.........................#.......#.....#.......#........#...#..",
  ".....##........................#..#.............#..............##.....#.....#.....#........#................#....#..##.#.........#.",
  "..#...#........#.#...........#...#..............#.#.....#.....#.......................................#..#.#..................#....",
  "...........#.#.....#..........#.#.......#.................#.......#.#...........#.............##........#.............#...#..#.#...",
  "....#.....#....##.#........##..#..#.#........................#.........#.......#.........#.....###.....#.#.........................",
  ".......#.....#.........#....#..#....#.....#..........#.#.#.........#.....#....#.........#.................#..........#...#.........",
  ".#......#.........#..#...#......#.............................#...........#...............#.......#...#..........#...#......###....",
  ".....................#..............#.#......#...........#......#....#.#...##.............#...##.#..#.###.#..............#.........",
  ".#...#.............#.....#.....##..#........#............#..##....###....#.................#..#.#...##.#...#..........#...#.#......",
  ".........#..#.....#..........................#.#..........##..#...##......................#...................#.....#............#.",
  ".....#...##............#.........##...###......#...................#..................................#...........##..#............",
  ".......#......................#....#...#..................#........#.#...#...........#.................#........#..........#.#.....",
  "............#..............#.#.#..........#...#............#.......#............#.#.....#..##....#...#.#.....##........#...........",
  "...........##.#..#...........#...#.....#.....#.............#......................#...........#...#.#.....#.......#..#..#..........",
  "...#.#......#..#..#...............................#.............#.#..................#....#.#....#..............#................#.",
  ".....#..................#...##.....#.#..#.#.#...................#..........................#.................#....#.....#..........",
  ".............#..#..#....#.#..#..##...............#...............................#....#........#..#..#.......##.#........#.........",
  "....#....#................##..#.........#.#..#....................#..............#...#......#...#..#...............................",
  "......#....##.........##..............#....#....#.#..#..#....................................#...........#.#.#.#.###......#........",
  ".#.#.....#.#..#.....#.....#.......##...#.......................................##......................#..........#.#....#..##..#..",
  "............#..#.#........#..........#....#..#.....#.....#................#....##...........#...##....##.##....##.....##.#.........",
  "...#....#...##..#.#.........#............#.........#.......................##..#.............................##....#..#.........#..",
  ".......#.#............#...#...##....##.#..##..............#............#..............#....#.....#...#....##....#....#........#....",
  "...................................................................................................................................",
];

const testInput = [
  "...........",
  ".....###.#.",
  ".###.##..#.",
  "..#.#...#..",
  "....#.#....",
  ".##..S####.",
  ".##..#...#.",
  ".......##..",
  ".##.#.####.",
  ".##..##.##.",
  "...........",
];

const findStart = input => {
  let y = 0;
  let x = 0;

  for (let i = 0; i < input.length; i++) {
    if (input[i].includes("S")) {
      y = i;
      x = input[i].indexOf("S");
    }
  }

  return { x, y };
};

const getNeightBoors = (arr, coords) => {
  const { x, y } = coords;

  const neightBoors = [];

  if (y < arr.length - 1) {
    neightBoors.push({ y: y + 1, x });
  }

  if (y > 0) {
    neightBoors.push({ y: y - 1, x });
  }

  if (x < arr[y].length - 1) {
    neightBoors.push({ y, x: x + 1 });
  }

  if (x > 0) {
    neightBoors.push({ y, x: x - 1 });
  }

  return neightBoors;
};

const dfs = (input, target = 64) => {
  const visited = {};

  for (let i = 0; i <= target; i++) {
    visited[i] = {};
  }

  const startCoords = findStart(input);

  const dfsHelper = (el, depth = 0) => {
    const { x, y } = el;

    if (visited[depth][`${y}-${x}`] || input[y][x] === "#") return 0;

    visited[depth][`${y}-${x}`] = true;
    if (depth === target) return 1;

    const neightBoors = getNeightBoors(input, el);

    return neightBoors.reduce((acc, curr) => acc + dfsHelper(curr, depth + 1), 0);
  };

  return dfsHelper(startCoords);
};

const bfs = (input, target = 64) => {
  const startCoords = findStart(input);

  const queue = [startCoords, null];
  let steps = 0;

  const visited = new Set();

  while (queue.length && steps < target) {
    const element = queue.shift();

    if (element == null) {
      steps++;

      queue.push(null);

      continue;
    }

    const { x, y } = element;

    visited.delete(`${y}-${x}`);

    const neightBoords = getNeightBoors(input, { x, y });

    const validNeighboors = neightBoords.filter(({ x, y }) => input[y][x] !== "#" && !visited.has(`${y}-${x}`));

    queue.push(...validNeighboors);

    validNeighboors.forEach(({ x, y }) => {
      visited.add(`${y}-${x}`);
    });
  }

  return queue.length - 1;
};

console.log(bfs(input, 26501365));
